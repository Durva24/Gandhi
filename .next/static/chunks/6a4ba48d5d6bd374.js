(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let i=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,i)=>!!e&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,t.forwardRef)(({color:e="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:s,className:o="",children:d,iconNode:a,...f},p)=>(0,t.createElement)("svg",{ref:p,...r,width:i,height:i,stroke:e,strokeWidth:s?24*Number(l)/Number(i):l,className:n("lucide",o),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(f)&&{"aria-hidden":"true"},...f},[...a.map(([e,i])=>(0,t.createElement)(e,i)),...Array.isArray(d)?d:[d]])),s=(e,r)=>{let s=(0,t.forwardRef)(({className:s,...o},d)=>(0,t.createElement)(l,{ref:d,iconNode:r,className:n(`lucide-${i(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,s),...o}));return s.displayName=i(e),s};e.s(["default",()=>s],75254)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652)},35408,e=>{"use strict";let t=(0,e.i(75254).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);e.s(["TrendingDown",()=>t],35408)},87316,43531,e=>{"use strict";var t=e.i(75254);let i=(0,t.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>i],87316);let n=(0,t.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>n],43531)},31299,e=>{"use strict";var t=e.i(43476),i=e.i(71645),n=e.i(71689),r=e.i(25652),l=e.i(35408),s=e.i(87316),o=e.i(43531);function d(){let[e,d]=(0,i.useState)([]),[a,f]=(0,i.useState)(!0),[p,c]=(0,i.useState)(new Set),[x,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await fetch("/api/get/lendings"),t=await e.json();if(t.success&&t.data){let e=t.data.filter(e=>"ongoing"===e.status);d(e)}f(!1)}catch(e){console.error("Error fetching lendings:",e),f(!1)}},y=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),u=e=>new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),m=(e,t,i)=>{if(0===t)return e/i;let n=t/1200;return e*n*Math.pow(1+n,i)/(Math.pow(1+n,i)-1)},j=(e,t)=>{let i=new Date(e),n=new Date(t);return Math.max(1,(n.getFullYear()-i.getFullYear())*12+(n.getMonth()-i.getMonth()))},v=e=>{let t=new Date;return Math.ceil((new Date(e).getTime()-t.getTime())/864e5)},b=e=>{let t=new Set(p);t.has(e)?t.delete(e):t.add(e),c(t)},w=e.filter(e=>"borrowed"===e.type),k=e.filter(e=>"lent"===e.type),S=w.reduce((e,t)=>e+t.remaining_amount,0),C=k.reduce((e,t)=>e+t.remaining_amount,0),z=C-S,W=e.filter(e=>p.has(e.id)).reduce((e,t)=>{if("emi"!==t.recurrence)return e+t.remaining_amount;{let i=j(t.start_date,t.due_date);return e+m(t.principal,t.interest_rate,i)}},0);return a?(0,t.jsxs)("div",{style:{height:"100vh",background:"#ffffff",fontFamily:"'Inter', sans-serif",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",gap:"12px",borderBottom:"2px solid #050505"},children:[(0,t.jsx)("div",{style:{background:"#C4F000",border:"2px solid #050505",height:"36px",width:"36px",animation:"pulse 1.5s ease-in-out infinite"}}),(0,t.jsx)("div",{style:{background:"#f5f5f5",height:"16px",width:"250px",animation:"pulse 1.5s ease-in-out infinite 0.2s"}})]}),(0,t.jsx)("div",{style:{flex:1,padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:(0,t.jsx)("div",{style:{display:"flex",gap:"16px",height:"140px"},children:[1,2,3].map(e=>(0,t.jsxs)("div",{style:{flex:1,background:1===e?"#C4F000":"#ffffff",border:"2px solid #050505",padding:"20px",animation:`pulse 1.5s ease-in-out infinite ${.2*e}s`},children:[(0,t.jsx)("div",{style:{background:"rgba(5, 5, 5, 0.1)",height:"12px",width:"100px",marginBottom:"16px"}}),(0,t.jsx)("div",{style:{background:"rgba(5, 5, 5, 0.15)",height:"32px",width:"140px",marginBottom:"10px"}}),(0,t.jsx)("div",{style:{background:"rgba(5, 5, 5, 0.1)",height:"10px",width:"80px"}})]},e))})}),(0,t.jsx)("style",{children:`
          @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
          }
        `})]}):(0,t.jsxs)("div",{style:{height:"100vh",background:"#ffffff",fontFamily:"'Inter', sans-serif",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px solid #050505"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,t.jsx)("a",{href:"/home",style:{background:"#C4F000",border:"2px solid #050505",padding:"8px 10px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",textDecoration:"none",color:"#050505",fontWeight:800,transition:"all 0.2s"},children:(0,t.jsx)(n.ArrowLeft,{size:18,strokeWidth:3})}),(0,t.jsx)("div",{style:{fontFamily:"'Syne', sans-serif",fontSize:"16px",fontWeight:800,letterSpacing:"1.5px",color:"#050505"},children:"LENDING & BORROWING"})]}),(0,t.jsx)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:p.size>0&&(0,t.jsx)("button",{onClick:()=>{0!==p.size&&(h(!0),setTimeout(()=>{d(e=>e.map(e=>{if(!p.has(e.id))return e;if("emi"!==e.recurrence)return{...e,remaining_amount:0,status:"settled"};{let t=j(e.start_date,e.due_date),i=m(e.principal,e.interest_rate,t),n=Math.max(0,e.remaining_amount-i);return{...e,remaining_amount:n,status:n<=0?"settled":"ongoing"}}}).filter(e=>"ongoing"===e.status)),c(new Set),h(!1)},1500))},disabled:x,style:{background:x?"#f5f5f5":"#C4F000",border:"2px solid #050505",padding:"8px 16px",fontSize:"11px",fontWeight:700,color:"#050505",cursor:x?"not-allowed":"pointer",transition:"all 0.2s",letterSpacing:"0.5px",opacity:x?.6:1},children:(()=>{if(x)return"SETTLING...";if(0===p.size)return"SELECT ITEMS";let t=e.filter(e=>p.has(e.id)),i=t.every(e=>"emi"===e.recurrence),n=t.every(e=>"one_time"===e.recurrence);return i?`PAY ${p.size} EMI${p.size>1?"S":""} (${y(W)})`:n?`SETTLE ${p.size} FULL (${y(W)})`:`PROCESS ${p.size} ITEM${p.size>1?"S":""} (${y(W)})`})()})})]}),(0,t.jsxs)("div",{style:{flex:1,padding:"20px",display:"flex",flexDirection:"column",gap:"16px",overflow:"auto"},children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"16px",flexShrink:0},children:[(0,t.jsxs)("div",{style:{flex:1,background:"#C4F000",border:"2px solid #050505",padding:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"12px"},children:[(0,t.jsx)(r.TrendingUp,{size:16,color:"#050505",strokeWidth:3}),(0,t.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",letterSpacing:"0.5px"},children:"TOTAL LENT"})]}),(0,t.jsx)("div",{style:{fontSize:"32px",fontWeight:800,color:"#050505",marginBottom:"6px"},children:y(C)}),(0,t.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",opacity:.8},children:[k.length," active ",1===k.length?"loan":"loans"]})]}),(0,t.jsxs)("div",{style:{flex:1,background:"#DC2626",border:"2px solid #050505",padding:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"12px"},children:[(0,t.jsx)(l.TrendingDown,{size:16,color:"#ffffff",strokeWidth:3}),(0,t.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#ffffff",letterSpacing:"0.5px"},children:"TOTAL BORROWED"})]}),(0,t.jsx)("div",{style:{fontSize:"32px",fontWeight:800,color:"#ffffff",marginBottom:"6px"},children:y(S)}),(0,t.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#ffffff",opacity:.9},children:[w.length," active ",1===w.length?"loan":"loans"]})]}),(0,t.jsxs)("div",{style:{flex:1,background:"#ffffff",border:"2px solid #050505",padding:"20px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,t.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",marginBottom:"12px",letterSpacing:"0.5px"},children:"NET POSITION"}),(0,t.jsx)("div",{style:{fontSize:"32px",fontWeight:800,color:z>=0?"#C4F000":"#DC2626",marginBottom:"6px"},children:y(Math.abs(z))}),(0,t.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",opacity:.8},children:z>=0?"Net creditor":"Net debtor"})]})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"16px",flex:1,minHeight:0},children:[(0,t.jsxs)("div",{style:{flex:1,background:"#ffffff",border:"2px solid #050505",padding:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #f5f5f5"},children:[(0,t.jsxs)("div",{style:{fontSize:"14px",fontWeight:800,color:"#050505",letterSpacing:"1px"},children:["LENT (",k.length,")"]}),(0,t.jsx)("div",{style:{background:"#C4F000",color:"#050505",padding:"4px 10px",fontSize:"10px",fontWeight:800,letterSpacing:"0.5px",border:"2px solid #050505"},children:"THEY OWE"})]}),(0,t.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",overflowY:"auto",paddingRight:"4px"},children:0===k.length?(0,t.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px",opacity:.5},children:[(0,t.jsx)(r.TrendingUp,{size:40,color:"#050505",strokeWidth:2}),(0,t.jsx)("div",{style:{fontSize:"12px",fontWeight:700,color:"#050505"},children:"No lendings"})]}):k.map(e=>{let i=(e.principal-e.remaining_amount)/e.principal*100,n=j(e.start_date,e.due_date),r="emi"===e.recurrence?m(e.principal,e.interest_rate,n):0,l=v(e.due_date),d=p.has(e.id);return(0,t.jsxs)("div",{onClick:()=>b(e.id),style:{background:d?"#f0fdf4":"#fafafa",border:d?"2px solid #C4F000":"2px solid #e5e5e5",padding:"16px",cursor:"pointer",transition:"all 0.2s"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"14px",fontWeight:800,color:"#050505",marginBottom:"4px"},children:e.party_name}),(0,t.jsx)("div",{style:{fontSize:"10px",fontWeight:600,color:"#050505",opacity:.6},children:e.interest_rate>0?`${e.interest_rate}% interest`:"Interest-free"})]}),(0,t.jsx)("div",{style:{width:"24px",height:"24px",border:"2px solid #050505",background:d?"#C4F000":"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:d&&(0,t.jsx)(o.Check,{size:16,color:"#050505",strokeWidth:3})})]}),(0,t.jsx)("div",{style:{height:"10px",background:"#ffffff",border:"2px solid #050505",display:"flex",marginBottom:"12px",overflow:"hidden"},children:(0,t.jsx)("div",{style:{width:`${i}%`,background:"#C4F000",borderRight:i>0&&i<100?"1px solid #050505":"none",transition:"width 0.3s ease"}})}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,t.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505"},children:[y(e.remaining_amount)," remaining"]}),(0,t.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",opacity:.6},children:["of ",y(e.principal)]})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{fontSize:"10px",fontWeight:600,color:l<7?"#DC2626":"#050505",display:"flex",alignItems:"center",gap:"4px"},children:[(0,t.jsx)(s.Calendar,{size:12,strokeWidth:2.5}),"Due: ",u(e.due_date)," (",l,"d)"]}),r>0&&(0,t.jsxs)("div",{style:{fontSize:"10px",fontWeight:700,color:"#050505"},children:["EMI: ",y(r)]})]})]},e.id)})})]}),(0,t.jsxs)("div",{style:{flex:1,background:"#ffffff",border:"2px solid #050505",padding:"20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px",paddingBottom:"12px",borderBottom:"2px solid #f5f5f5"},children:[(0,t.jsxs)("div",{style:{fontSize:"14px",fontWeight:800,color:"#050505",letterSpacing:"1px"},children:["BORROWED (",w.length,")"]}),(0,t.jsx)("div",{style:{background:"#DC2626",color:"#ffffff",padding:"4px 10px",fontSize:"10px",fontWeight:800,letterSpacing:"0.5px",border:"2px solid #050505"},children:"YOU OWE"})]}),(0,t.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"12px",overflowY:"auto",paddingRight:"4px"},children:0===w.length?(0,t.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"12px",opacity:.5},children:[(0,t.jsx)(l.TrendingDown,{size:40,color:"#050505",strokeWidth:2}),(0,t.jsx)("div",{style:{fontSize:"12px",fontWeight:700,color:"#050505"},children:"No borrowings"})]}):w.map(e=>{let i=(e.principal-e.remaining_amount)/e.principal*100,n=j(e.start_date,e.due_date),r="emi"===e.recurrence?m(e.principal,e.interest_rate,n):0,l=v(e.due_date),d=p.has(e.id);return(0,t.jsxs)("div",{onClick:()=>b(e.id),style:{background:d?"#fef2f2":"#fafafa",border:d?"2px solid #DC2626":"2px solid #e5e5e5",padding:"16px",cursor:"pointer",transition:"all 0.2s"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"12px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"14px",fontWeight:800,color:"#050505",marginBottom:"4px"},children:e.party_name}),(0,t.jsx)("div",{style:{fontSize:"10px",fontWeight:600,color:"#050505",opacity:.6},children:e.interest_rate>0?`${e.interest_rate}% interest`:"Interest-free"})]}),(0,t.jsx)("div",{style:{width:"24px",height:"24px",border:"2px solid #050505",background:d?"#DC2626":"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:d&&(0,t.jsx)(o.Check,{size:16,color:"#ffffff",strokeWidth:3})})]}),(0,t.jsx)("div",{style:{height:"10px",background:"#ffffff",border:"2px solid #050505",display:"flex",marginBottom:"12px",overflow:"hidden"},children:(0,t.jsx)("div",{style:{width:`${i}%`,background:"#DC2626",borderRight:i>0&&i<100?"1px solid #050505":"none",transition:"width 0.3s ease"}})}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,t.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505"},children:[y(e.remaining_amount)," remaining"]}),(0,t.jsxs)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",opacity:.6},children:["of ",y(e.principal)]})]}),(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{fontSize:"10px",fontWeight:600,color:l<7?"#DC2626":"#050505",display:"flex",alignItems:"center",gap:"4px"},children:[(0,t.jsx)(s.Calendar,{size:12,strokeWidth:2.5}),"Due: ",u(e.due_date)," (",l,"d)"]}),r>0&&(0,t.jsxs)("div",{style:{fontSize:"10px",fontWeight:700,color:"#050505"},children:["EMI: ",y(r)]})]})]},e.id)})})]})]})]}),(0,t.jsx)("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.6; }
        }
      `})]})}e.s(["default",()=>d])}]);