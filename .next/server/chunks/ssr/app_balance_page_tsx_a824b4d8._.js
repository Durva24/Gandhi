module.exports=[22991,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(210);let e=({transactions:a,selectedAccount:d,formatCurrency:e,onTransactionAdded:f})=>{let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)({type:"debit",categoryId:"",amount:"",description:""}),m=a=>{let{name:b,value:c}=a.target;l(a=>({...a,[b]:c}))},n=async()=>{if(!k.amount||!k.description)return void alert("Please fill all required fields");j(!0);try{let a=new Date().toISOString().split("T")[0],b=await fetch("/api/put/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountId:"b3f6e214-39b2-4689-bdcf-e178497d16da",type:k.type,categoryId:k.categoryId||null,amount:parseFloat(k.amount),description:k.description,date:a})}),c=await b.json();c.success?(l({type:"debit",categoryId:"",amount:"",description:""}),h(!1),f()):alert("Error: "+c.error)}catch(a){console.error("Failed to create transaction:",a),alert("Failed to create transaction")}finally{j(!1)}},o=()=>d?a.filter(a=>a.account_id===d):a;return(0,b.jsxs)(b.Fragment,{children:[!g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,b.jsx)("div",{style:{fontSize:"14px",fontWeight:800,letterSpacing:"0.5px",color:"#050505"},children:"TRANSACTIONS"}),(0,b.jsx)("button",{onClick:()=>h(!0),style:{background:"#C4F000",border:"2px solid #050505",width:"24px",height:"24px",cursor:"pointer",fontWeight:800,fontSize:"14px",color:"#050505",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:"+"})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px",overflowY:"auto",flex:1},children:[o().map(a=>(0,b.jsxs)("div",{style:{background:"#ffffff",border:"2px solid #050505",padding:"10px 12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("div",{style:{fontWeight:700,fontSize:"13px",color:"#050505"},children:a.description}),(0,b.jsxs)("div",{style:{fontSize:"10px",color:"#050505",opacity:.5,marginTop:"2px"},children:[a.accounts?.account_name," • ",a.categories?.name||"N/A"]})]}),(0,b.jsxs)("div",{style:{textAlign:"right",marginLeft:"12px",display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"2px"},children:[(0,b.jsxs)("div",{style:{fontSize:"15px",fontWeight:800,color:"debit"===a.type?"#DC2626":"#16A34A"},children:["debit"===a.type?"-":"+",e(a.amount)]}),(0,b.jsx)("div",{style:{fontSize:"9px",color:"#050505",opacity:.5},children:new Date(a.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})})]})]},a.id)),0===o().length&&(0,b.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#666",fontSize:"13px"},children:"No transactions found"})]})]}),g&&(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",height:"100%"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[(0,b.jsx)("div",{style:{fontSize:"14px",fontWeight:800,letterSpacing:"0.5px",color:"#050505"},children:"ADD TRANSACTION"}),(0,b.jsx)("button",{onClick:()=>h(!1),style:{background:"#DC2626",border:"2px solid #050505",width:"24px",height:"24px",cursor:"pointer",fontWeight:800,fontSize:"14px",color:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:"×"})]}),(0,b.jsxs)("select",{name:"type",value:k.type,onChange:a=>{let b=a.target.value;l(a=>({...a,type:b,categoryId:""}))},style:{background:"#FFFFFF",border:"2px solid #050505",padding:"10px",fontSize:"12px",fontWeight:700,color:"#050505"},children:[(0,b.jsx)("option",{value:"debit",children:"SPENDING"}),(0,b.jsx)("option",{value:"credit",children:"INCOME"})]}),(0,b.jsxs)("select",{name:"categoryId",value:k.categoryId,onChange:m,style:{background:"#FFFFFF",border:"2px solid #050505",padding:"10px",fontSize:"12px",fontWeight:700,color:"#050505"},children:[(0,b.jsx)("option",{value:"",children:"CATEGORY (OPTIONAL)"}),("debit"===k.type?[{id:"9bcdaf57-3903-42bd-80df-756b29b2be02",name:"Food"},{id:"f109cc76-44f8-41e2-883f-d5cee776c885",name:"Transport"},{id:"711eac3a-33c6-4011-9f86-548d8fc31e37",name:"Housing"},{id:"69143d7e-37f8-498b-ba46-a6b5d4af6086",name:"Shopping"},{id:"e008c9cc-3c5d-46d2-be5a-262f3dce00cd",name:"Health"}]:[{id:"ee7ddc86-ba98-4c1e-aa02-ae819b388f47",name:"Salary"},{id:"6ef718a3-ac9a-492b-b30b-6f80a2855f4b",name:"Freelancing"}]).map(a=>(0,b.jsx)("option",{value:a.id,children:a.name.toUpperCase()},a.id))]}),(0,b.jsx)("input",{type:"number",name:"amount",placeholder:"Amount",value:k.amount,onChange:m,min:"0.01",step:"0.01",style:{background:"#FFFFFF",border:"2px solid #050505",padding:"10px",fontSize:"12px",fontWeight:700,color:"#050505"}}),(0,b.jsx)("input",{type:"text",name:"description",placeholder:"Description",value:k.description,onChange:m,style:{background:"#FFFFFF",border:"2px solid #050505",padding:"10px",fontSize:"12px",fontWeight:700,color:"#050505"}}),(0,b.jsx)("button",{onClick:n,disabled:i,style:{background:"#C4F000",border:"2px solid #050505",padding:"12px",fontSize:"12px",fontWeight:800,cursor:i?"not-allowed":"pointer",opacity:i?.6:1,color:"#050505",marginTop:"auto"},children:i?"ADDING...":"ADD TRANSACTION"})]})]})};function f(){let[a,f]=(0,c.useState)(null),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!0);(0,c.useEffect)(()=>{q()},[]);let q=async()=>{try{let[a,b,c]=await Promise.all([fetch("/api/get/users"),fetch("/api/get/accounts"),fetch("/api/get/transactions")]),d=await a.json(),e=await b.json(),g=await c.json();d.success&&f(d.data),e.success&&h(e.data),g.success&&j(g.data),n(!1),setTimeout(()=>p(!1),2500)}catch(a){console.error("Error fetching data:",a),n(!1),p(!1)}},r=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a),s=({height:a="120px",bgColor:c="#ffffff"})=>(0,b.jsxs)("div",{style:{background:c,border:"2px solid #050505",padding:"24px",minHeight:a,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:{width:"40%",height:"10px",background:"#C4F000"===c?"rgba(0,0,0,0.1)":"#e5e5e5",marginBottom:"12px"}}),(0,b.jsx)("div",{style:{width:"70%",height:"14px",background:"#C4F000"===c?"rgba(0,0,0,0.1)":"#e5e5e5"}})]}),(0,b.jsx)("div",{style:{width:"60%",height:"24px",background:"#C4F000"===c?"rgba(0,0,0,0.1)":"#e5e5e5"}})]}),t=()=>(0,b.jsxs)("div",{style:{background:"#ffffff",border:"2px solid #050505",padding:"10px 12px",display:"flex",justifyContent:"space-between"},children:[(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsx)("div",{style:{width:"60%",height:"13px",background:"#e5e5e5",marginBottom:"4px"}}),(0,b.jsx)("div",{style:{width:"40%",height:"10px",background:"#e5e5e5"}})]}),(0,b.jsx)("div",{style:{width:"80px",height:"15px",background:"#e5e5e5"}})]});if(m)return(0,b.jsxs)("div",{style:{minHeight:"100vh",background:"#ffffff",fontFamily:"'Inter', sans-serif",display:"flex",flexDirection:"column"},children:[(0,b.jsxs)("div",{style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px"},children:[(0,b.jsx)("div",{style:{background:"#e5e5e5",border:"2px solid #050505",padding:"10px 12px",width:"44px",height:"44px"}}),(0,b.jsx)("div",{style:{width:"100px",height:"20px",background:"#e5e5e5"}})]}),(0,b.jsxs)("div",{style:{flex:1,padding:"0 24px 24px 24px",display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridTemplateRows:"auto 1fr",gap:"16px"},children:[(0,b.jsx)("div",{style:{gridColumn:"span 4"},children:(0,b.jsx)(s,{height:"auto",bgColor:"#ffffff"})}),(0,b.jsx)("div",{style:{gridColumn:"span 4"},children:(0,b.jsx)(s,{height:"auto",bgColor:"#C4F000"})}),(0,b.jsx)("div",{style:{gridColumn:"span 4"},children:(0,b.jsx)(s,{height:"auto",bgColor:"#ffffff"})}),(0,b.jsxs)("div",{style:{gridColumn:"span 8",background:"#ffffff",border:"2px solid #050505",padding:"16px"},children:[(0,b.jsx)("div",{style:{width:"120px",height:"14px",background:"#e5e5e5",marginBottom:"12px"}}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"14px"},children:[1,2,3,4].map(a=>(0,b.jsx)(s,{bgColor:"#ffffff"},a))})]}),(0,b.jsxs)("div",{style:{gridColumn:"span 4",background:"#ffffff",border:"2px solid #050505",padding:"16px"},children:[(0,b.jsx)("div",{style:{width:"140px",height:"14px",background:"#e5e5e5",marginBottom:"12px"}}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[1,2,3,4,5].map(a=>(0,b.jsx)(t,{},a))})]})]})]});let u=g.reduce((a,b)=>a+b.balance,0),v=i.filter(a=>"debit"===a.type),w=v.reduce((a,b)=>a+b.amount,0),{daysLeft:x,dailySpend:y}=(()=>{if(!i.length)return{daysLeft:0,dailySpend:0};let a=new Date;a.setDate(a.getDate()-30);let b=i.filter(b=>{let c=new Date(b.date);return"debit"===b.type&&c>=a});if(!b.length)return{daysLeft:999,dailySpend:0};let c=b.reduce((a,b)=>a+b.amount,0)/30,d=g.reduce((a,b)=>a+b.balance,0);return{daysLeft:c>0?Math.floor(d/c):999,dailySpend:c}})();return(0,b.jsxs)("div",{style:{minHeight:"100vh",background:"#ffffff",fontFamily:"'Inter', sans-serif",display:"flex",flexDirection:"column"},children:[(0,b.jsxs)("div",{style:{padding:"24px",display:"flex",alignItems:"center",gap:"20px"},children:[(0,b.jsx)("a",{href:"/home",style:{background:"#C4F000",border:"2px solid #050505",padding:"10px 12px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",textDecoration:"none",color:"#050505",fontWeight:800,transition:"all 0.2s"},onMouseEnter:a=>{a.currentTarget.style.background="#050505",a.currentTarget.style.color="#C4F000"},onMouseLeave:a=>{a.currentTarget.style.background="#C4F000",a.currentTarget.style.color="#050505"},children:(0,b.jsx)(d.ArrowLeft,{size:20,strokeWidth:3})}),(0,b.jsx)("div",{style:{fontFamily:"'Syne', sans-serif",fontSize:"20px",fontWeight:800,letterSpacing:"1.5px",color:"#050505",lineHeight:"44px"},children:"BALANCE"})]}),(0,b.jsxs)("div",{style:{flex:1,padding:"0 24px 24px 24px",display:"grid",gridTemplateColumns:"repeat(12, 1fr)",gridTemplateRows:"auto 1fr",gap:"16px",maxHeight:"calc(100vh - 90px)",overflow:"hidden"},children:[(0,b.jsxs)("div",{style:{gridColumn:"span 4",background:"#ffffff",border:"2px solid #050505",padding:"20px"},children:[(0,b.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",marginBottom:"8px",letterSpacing:"0.5px"},children:"TOTAL BALANCE"}),(0,b.jsx)("div",{style:{fontSize:"32px",fontWeight:800,color:"#050505"},children:r(u)}),(0,b.jsx)("div",{style:{fontSize:"10px",fontWeight:600,color:"#050505",opacity:.5,marginTop:"8px",fontStyle:"italic"},children:o?"predicting...":x>365?"stable":`~${x} days left`})]}),(0,b.jsxs)("div",{style:{gridColumn:"span 4",background:"#C4F000",border:"2px solid #050505",padding:"20px"},children:[(0,b.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",marginBottom:"8px",letterSpacing:"0.5px"},children:"YOUR BALANCE"}),(0,b.jsx)("div",{style:{fontSize:"32px",fontWeight:800,color:"#050505"},children:r(a?.balance||0)}),(0,b.jsx)("div",{style:{fontSize:"10px",fontWeight:600,color:"#050505",opacity:.5,marginTop:"8px",fontStyle:"italic"},children:o?"predicting...":y>0?`₹${Math.round(y)}/day avg`:"no spending"})]}),(0,b.jsxs)("div",{style:{gridColumn:"span 4",background:"#ffffff",border:"2px solid #050505",padding:"20px"},children:[(0,b.jsx)("div",{style:{fontSize:"11px",fontWeight:700,color:"#050505",marginBottom:"8px",letterSpacing:"0.5px"},children:"TOTAL SPENT"}),(0,b.jsx)("div",{style:{fontSize:"32px",fontWeight:800,color:"#DC2626"},children:r(w)}),(0,b.jsx)("div",{style:{fontSize:"10px",fontWeight:600,color:"#050505",opacity:.5,marginTop:"8px",fontStyle:"italic"},children:`${v.length} transactions`})]}),(0,b.jsxs)("div",{style:{gridColumn:"span 8",background:"#ffffff",border:"2px solid #050505",padding:"16px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,b.jsxs)("div",{style:{fontSize:"14px",fontWeight:800,color:"#050505",display:"flex",justifyContent:"space-between",alignItems:"center",letterSpacing:"0.5px",marginBottom:"12px"},children:[(0,b.jsx)("span",{children:"ACCOUNTS"}),k&&(0,b.jsx)("button",{onClick:()=>l(null),style:{background:"#050505",border:"2px solid #050505",padding:"4px 10px",cursor:"pointer",fontSize:"10px",fontWeight:700,color:"#C4F000",letterSpacing:"0.5px"},children:"CLEAR"})]}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"14px",overflowY:"auto",flex:1},children:g.map(a=>{let c=k===a.id,d="",e=a.account_name.toLowerCase();return d=e.includes("hdfc")?"HDFC":e.includes("paytm")?"PAYTM":e.includes("phonepe")?"PhonePe":e.includes("cash")?"₹":e.includes("visa")?"VISA":e.includes("mastercard")?"MC":"bank"===a.type?"BANK":"wallet"===a.type?"WALLET":"cash"===a.type?"₹":a.type.charAt(0).toUpperCase(),(0,b.jsxs)("div",{onClick:()=>l(a.id),onMouseEnter:a=>{a.currentTarget.style.filter="brightness(0.9)"},onMouseLeave:a=>{a.currentTarget.style.filter="brightness(1)"},style:{background:c?"#C4F000":"#ffffff",border:"2px solid #050505",padding:"24px",cursor:"pointer",transition:"all 0.15s",minHeight:"120px",display:"flex",flexDirection:"column",justifyContent:"space-between",position:"relative"},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[(0,b.jsx)("div",{style:{fontSize:"10px",fontWeight:700,color:"#050505",opacity:.6,letterSpacing:"0.5px"},children:a.type.toUpperCase()}),(0,b.jsx)("div",{style:{fontSize:d.length<=2?"18px":"12px",fontWeight:900,color:"#050505",opacity:.15,letterSpacing:d.length<=2?"0":"1px",fontFamily:d.length<=2?"'Inter', sans-serif":"'Syne', sans-serif"},children:d})]}),(0,b.jsx)("div",{style:{fontWeight:700,fontSize:"14px",color:"#050505"},children:a.account_name})]}),(0,b.jsx)("div",{style:{fontSize:"24px",fontWeight:800,color:"#050505"},children:r(a.balance)})]},a.id)})})]}),(0,b.jsx)("div",{style:{gridColumn:"span 4",background:"#ffffff",border:"2px solid #050505",padding:"16px",display:"flex",flexDirection:"column",overflow:"hidden"},children:(0,b.jsx)(e,{transactions:i,selectedAccount:k,formatCurrency:r,onTransactionAdded:()=>{p(!0),q()}})})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_balance_page_tsx_a824b4d8._.js.map